## Crime informático vs Cibercrime
- **Cibercrime** refere-se a qualquer ato ilícito praticado no ciberespaço, quer se trate de uma crime informático ou qualquer outro cometido por meios informáticos.

- **Crime de computador**: uma ação que viola um dos princípios da CIA ou da AAA princípios

## BBS's (Sistema de quadro de avisos)
Uma forma primitiva de comunicação online, onde os utilizadores podem trocar mensagens e ficheiros.

### Blueboxing
Permite fazer chamadas telefónicas não pagas usando dispositivos eletrónicos.

### Blackboxing
Permite a comunicação entre componentes eletrónicos para permitir fazer chamadas sem pagar às companhias de telecomunicações.

**Nomencaltura do delito**: Burla informática e nas comunicações.
**Pena**: até 3 anos de prisão.

## Carding
Prática criminosa na qual indivíduos tentam usar informações de cartões de crédito ou débito roubadas ou obtidas de forma fraudulenta para fazer compras ou transações online.

**Nomenclatura do delito**: Falsidade informática.
**Pena**: até 5 anos de prisão.

## Hacking vs Cracking
*Hacking* envolve a busca por vulnerabilidades em sistemas de computador e redes, muitas vezes com intenções legítimas, como melhorar a segurança. Já o *cracking* refere-se à quebra ilegal de sistemas de segurança para obter acesso não autorizado ou manipular software para fins ilegais.

**Nomenclatura do delito**: Descompilação ou Acesso ilegítimo ou Acesso indevido.
**Pena**: até 1 anos se o acesso foi ganho **sem** violação de regras de segurança, até 3 anos se o acesso foi ganho **com** violação de regras de segurança e até 5 anos se o acesso foi ganho com violação de regras de segurança e com intenção de obter **vantagem** económica, obter segredos comerciais ou causar danos.

## Delitos informáticos

### Nuke
Ataque que consiste na **destruição** de um sistema ou rede através do envio de pacotes de dados que causam a falha do sistema.

### Phreaking
Ataque que envolve a exploração e manipulação de sistemas de telecomunicações, especialmente sistemas telefónicos.

### Sniffing 
Ato de interceptar as comunicações entre outras pessoas.

**Nomenclatura do delito**: Interceção ilegítima de comunicações.
**Pena**: até 3 anos de prisão.

### Spam
Envio de mensagens não solicitadas em massa.

**Nomenclatura do delito**: Sabotagem informática.
**Pena**: até 5 anos de prisão.

### Phishing
Ataque que consiste em enganar o utilizador para que este revele informações pessoais. Pode ser atingido através de engenharia social (e-mail, SMS, etc) ou através de intrusão (vulnerabilidades, brute force, etc).

### Pharming
Ataque que consiste em redirecionar o utilizador para um site falso, onde este irá inserir as suas credenciais.

### Internet Grooming
Ataque que consiste em um adulto se fazer passar por uma criança para ganhar a sua confiança e, posteriormente, abusar sexualmente dela.

**Nomenclatura do delito**: Atos exibionistas ou abuso sexual de crianças ou adolescentes e dependentes.
**Pena**: até 5 anos de prisão.

Também,
**Nomenclatura do delito**: Lenocínio de menores.
**Pena**: até 5 anos de prisão para idades entre os 14 e 16 anos e até 10 anos de prisão para idades inferiores a 14 anos.

### Extorsão
Consiste em ameaçar o utilizador para obter algo em troca.

**Nomenclatura do delito**: Extorsão.
**Pena**: até 5 anos de prisão.

### Ciberterrorismo
Ato que consiste em usar a tecnologia para promover ideologias políticas, religiosas ou racistas através de ameaças ou atos de violência.

### *Cybersquatting*
Ato de registar um domínio com o intuito de o vender a um preço mais elevado ou tirar proveito do nome de uma empresa.

**Nomenclatura do delito**: Extorsão.
**Pena**: até 5 anos de prisão.

### *Warez*
Distribuição ilegal de software.

**Nomenclatura do delito**: Usurpação

## Tipos de ataques informáticos

### Datajacking/Ransomware
Ataque que consiste em encriptar os ficheiros do utilizador e pedir um resgate para os desencriptar.

**Nomenclatura do delito**: Extorsão de documentos.
**Pena**: até 2 anos de prisão.

### Ip Spoofing
Ataque que consiste em falsificar o endereço IP de um computador para se fazer passar por outro.

### DoS (Denial of Service)
Ataque que consiste em mandar um grande número de pedidos SYN para um servidor, de forma a que este fique sobrecarregado e não consiga responder aos restantes pedidos.

**Nomenclatura do delito**: Sabotagem informática.
**Pena**: até 5 anos de prisão.

### Smurf Attack
Ataque que consiste em enviar um grande número de pedidos ICMP para um servidor, de forma a que este fique sobrecarregado e não consiga responder aos restantes pedidos.

#### Fraggle Attack
Uma variação do Smurf Attack, mas em vez de usar ICMP, usa UDP.

### Website defacement
Ataque que consiste em alterar o conteúdo de um website.

**Nomenclatura do delito**: Dano relativo a programas ou outros dados informáticos.
**Pena**: até 3 anos de prisão.

## Características de Provas digitais válidas
 - **Admissíveis**: aceite em tribunal, é definido pelo como é recolhida a prova.
 - **Autêntica**: é a prova genuína, não foi alterada.
 - **Precisa**
 - **Concreta**: é a prova que é relevante para o caso.

## Processo de análise forense
Estes são os passos que um perito forense deve seguir para analisar uma prova digital:
 1. **Identificação**: identificar a fonte da prova digital.
 2. **Preservação**: preservar a prova digital.
 3. **Análise**: analisar a prova digital.
 4. **Apresentação**: apresentar a prova digital.

## Foco de uma investigação digital
A investigação envolve dispositivos usados para:
 - **Cometer um crime digital**: execução de um evento digital que viola a lei.
 - **Cometer um crime físico**: uso suspeito que possa ter conduzido a uma pesquisa para cometer um crime físico.

Quando se investiga um crime digital, é necessário ter em conta os seguintes aspetos:
 - **Quem** cometeu o crime?
 - **O que** foi feito?
 - **Quando** foi feito?
 - **Onde** foi feito?
 - **Como** foi feito?
 - **Porquê** foi feito?

## *Hard Disk Drive* (HDD)
É uma forma não volátil de armazenamento magnético.

Existe dois tipos de **acesso**:
 - **Acesso Direto (s/BIOS)**: Consiste na escrita e leitura de dados diretamente pelo controlador do disco.
 - **Acesso Sequencial (c/BIOS)**: Consiste na escrita e leitura de dados através do sistema operativo. 

Nota: O acesso sequencial é mais lento que o acesso direto, no entanto, o acesso sequencial é mais simples de implementar.

### Estrutura
Um HDD é composto por:
 - **Trilhas (tracks)**: os endereços começam do exterior (o endereço das trilhas pode ser representado pelo número da *head*).
 - **Cilindros (cylindres)**: todas as trilhas num determinado endereço em todos os pratos (o endereço dos cilindros pode ser representado pelo número do *cylinder*)
 - **Sectores (sectors)**: subdivisão de trilhas, tipicamente 512 bytes (o endereço dos sectores pode ser representado pelo número do *sector*).

Para obter  o endereço de um determinado setor, é necessário saber o número do *cylinder*, o número da *head* e o número do *sector* (CHS).

Nota: Esta tradução está limitada a apenas 8,1 GB de espaço de endereçamento.

Outro modo é o LBA (Logical Block Addressing), que consiste em endereçar os setores sequencialmente, começando no 0. A conversão de CHS para LBA é feita através da seguinte fórmula:
```LBA = (C * Max(H) + H) * Max(S) + (S - 1)```


## *Advanced Technology Attachment* (ATA)
É um padrão de interface para a conexão de dispositivos de armazenamento, como discos rígidos e drives ópticas, em computadores.

No surgimento de ATA-4 e ATA-6, respetivamente, foram introduzidas as seguintes áreas de armazenamento de dados:
 - **Host Protected Area (HPA)**: É uma área de armazenamento de dados que o sistema operativo não consegue aceder. Esta área é usada para armazenar dados de diagnóstico e de recuperação de dados.
 - **Device Configuration Overlay (DCO)**: É uma área de armazenamento de dados que o sistema operativo não consegue aceder. Esta área é projetado para armazenar informações de configuração da unidade.


## *Small Computer System Interface* (SCSI)
É um conjunto de padrões para conectar dispositivos e periféricos a um computador. 

## *Solid State Drive* (SSD)
Semelhante a um HDD em termos de componentes, no entanto, o SSD tem a sua própria unidade de processamento e memória, o que permite que o SSD seja mais rápido que o HDD, pois a sua leitura não depende da localização física dos dados (ao contrário do HDD).

Existem os seguintes tipos de SSD:
 - **DRAM**: É um tipo de memória volátil, ou seja, quando o computador é desligado, os dados são perdidos.
 - **Flash memory**: É um tipo de memória não volátil, ou seja, quando o computador é desligado, os dados não são perdidos (pode ser NAND ou NOR).
## *Bad Blocks*
Um bloco é considerado mau quando não é possível ler ou escrever dados nesse bloco.

## *Wear Leveling*
*Wear leveling* é uma técnica usada em dispositivos de armazenamento, especialmente em SSDs (Solid State Drives), para distribuir uniformemente as operações de gravação e apagar dados em todas as células de armazenamento. O *wear leveling* procura evitar esse desgaste desigual, movendo dinamicamente os dados entre as células de armazenamento. Dessa forma, todas as células são usadas de maneira mais equitativa, prolongando a vida útil do dispositivo como um todo.

## USB Pen Drive
É um dispositivo de armazenamento portátil que utiliza memória flash para armazenar dados. Não possui o seu próprio processador, mas sim um controlador que permite a comunicação com o computador, usando o CPU para calcular o ECC (Error Correction Code), bad blocks, wear leveling, etc.

## Protocolos dos conectores SSD, interfaces e transferência de dados
 - Conector: camada 1, parte física dos dispositivos de armazenamento.
 - Interface: camada 2, protocolo de comunicação entre o controlador e o dispositivo de armazenamento.
 - Transferência de dados: camada 3, protocolo de comunicação entre o sistema operativo e o controlador.

M.2 é um conector que suporta vários protocolos de interface, como SATA, PCIe e USB:
- **SATA**: Serial ATA, é um protocolo de interface para transferência de dados entre o controlador e o dispositivo de armazenamento.
- **PCIe**: Peripheral Component Interconnect Express, é um protocolo de interface para transferência de dados entre o controlador e o dispositivo de armazenamento.
- **USB**: Universal Serial Bus, é um protocolo de interface para transferência de dados entre o controlador e o dispositivo de armazenamento.
## Volumes

Um volume é uma área de armazenamento de dados que pode ser acessada por um sistema operativo. Pode ser criado juntando vários espaços de armazenamento pequenos, tornando-os num único espaço de armazenamento maior. Normalmente, nos sistemas operativos, os volumes são representados por letras (C:, D:, E:, etc.).

### Para que servem os volumes?

Os volumes são usados para:

- **Organizar os dados**: os dados podem ser organizados em volumes para facilitar a sua gestão.
- **Separar os ficheiros do SO dos ficheiros do utilizador**: os ficheiros do SO podem ser armazenados num volume e os ficheiros do utilizador noutro volume.
- **Permitir *dual boot***: é possível ter vários sistemas operativos instalados no mesmo computador, cada um num volume diferente.

### Agrupamento de volumes

O agrupamento de volumes é uma tecnologia que permite combinar vários volumes num único volume lógico. O agrupamento de volumes é usado para aumentar performance, prevenir falhas por redundância e aumentar a capacidade de armazenamento.

Existem alguns tipos de agrupamento de volumes:
- **RAID**: comum em sistemas de grande dimensão, consiste em dividir os dados por vários discos rígidos;
- **Spanning**: cria um volume lógico adicionando espaço livre de vários volumes menores;

## Partições

Uma partição é uma divisão lógica de um disco rígido que é tratada como uma unidade separada pelo sistema operativo. Uma partição é criada quando o disco rígido é formatado. Uma partição pode ser criada em qualquer disco rígido, independentemente do tamanho ou do número de partições já existentes.

Nota: Um volume pode corresponder a uma partição inteira ou a uma parte de uma partição.

![Partições e Volumes](particao_volumes.png)

### Tabela de Partições

A tabela de partições é uma estrutura de dados que contém informações sobre as partições de um disco rígido. A tabela de partições é criada quando o disco rígido é formatado. 

Existem dois tipos de dados que podem ser armazenados na tabela de partições:
- **Essencial data**: Inicio e fim de setor de cada partição.
- **Non-essential data**: Tipo de partição, tamanho da partição, etc.

![Tabela de Partições](tabela_de_particao.png)

Alguns tipos de tabelas de partições:
- MBR;
- GPT;
- FreeBSD;
- DOS;
- etc.;

## Endereçamento de setores

### Endereçamento LBA

O endereçamento LBA (Logical Block Addressing) é um método de endereçamento de setores de um disco rígido. Mapa os setores físicos do disco rígido, não pode ser usado para endereçar setores de um volume.

Estas são as camadas de endereçamento de um disco rígido:
- **Endereço físico**
- **Endereço lógico**: igual ao endereço físico;
- **Endereço lógico de partição**: cada partiçao tem o seu próprio endereço lógico;

## Testes de consistência
Estes são alguns testes de consistência que podem ser feitos num disco rígido:
- Verificar se a ultima partição termina no ultimo setor do disco rígido;
- Verificar se as partições estão sobrepostas;
- Verificar se as partições são consecutivas;

## Disktype tool

A ferramenta disktype permite identificar o tipo de partição de um disco rígido.

## Logical Volume Manager (LVM)

O LVM é um sistema de gestão de volumes lógicos que permite criar volumes lógicos de forma dinâmica a partir de vários discos rígidos.

## Informação Volátil

A informação volátil é a informação que é perdida quando o computador é desligado. A informação volátil é armazenada na RAM (Random Access Memory). Pode conter, código malicioso de uma infeção, chaves de cifra e palavras-passe.

## Direct Memory Access (DMA)

O DMA é um método que permite que os dispositivos de I/O transfiram dados diretamente para a RAM, sem a intervenção do CPU. O DMA é usado para aumentar a performance do computador.

## Paging

O paging é um método de gestão de memória que permite que o sistema operativo transfira páginas de memória para o disco rígido, quando a RAM está cheia. O paging é usado para aumentar a capacidade de memória do computador.

## Impacto na análise forense da memória

O software forense deve emular o espaço de endereço virtual e tratar de forma transparente a tradução de endereços virtuais para físicos.

## Memory Acquisition (Aquisição de Memória)

A aquisição de memória é o processo de copiar o conteúdo da memória para um ficheiro, de modo a obter um melhor entendimento do que aconteceu no computador.

![Memory Acquisition](aquisicao_memoria_arvore_decisao.png)

Existem alguns riscos associados à aquisição de memória, como:
- A maioria dos SOs não fornece um mecanismo nativo suportado para aquisição de memória física;
- As ferramentas de aquisição de memória podem deixar o sistema instável;
- O malware mal escrito pode ser instável e ter um comportamento imprevisível;

A aquisição de memória pode ser levar a instabilidades no sistema e corrupção de evidências, devido a:
- **Atomicidade**: este processo não é atómico, ou seja, não é possível garantir que o conteúdo da memória não foi alterado durante a aquisição;
- **Coerência de cache**: os processadores não foram desenhados para acoplar de uma forma simultanea a memória alocada no mesmo endereço físico com os diversos atributos do cache;
- **Memória do dispositivo**: alguma da memória fisica é usada por firmware, ou dispositivos da motherboard, a leitura de memória desses dispositivos pode causar instabilidade no sistema;

### Software Memory Acquisition

Decisões a fazer:

- **remoto ou local** - existe acesso físico ao sistema alvo? É um servidor sem teclado ou monitor ligado?
- **custo** - existem restrições orçamentais quanto ao software de aquisição que pode comprar?
- **formato de ficheiro** - a ferramenta de análise suporta o formato de ficheiro da ferramenta de aquisição?
- **CLI ou GUI** - ferramentas de linha de comando ou de interface gráfica do utilizador? Uma ferramenta CLI pode ter uma ferramenta CLI pode ter uma pegada mais pequena, além de que pode não ter um motor gráfico a executar a aquisição ou o tempo de execução.

O processo é o seguinte:
1. Carregar um módulo do kernel que mapeia os endereços físicos desejados no espaço de endereço virtual de um processo;
2. Aceder aos dados do espaço de endereço virtual;
3. Escrever o conteúdo no armazenamento não-volátil solicitado;
4. A maioria das ferramentas evita a aquisição de regiões de memória do dispositivo;

## Algumas ferramentas de aquisição de memória

- **FTK Imager**: Ferramenta de aquisição de memória que permite criar uma imagem de memória de um computador.
- **Volatility**: A ferramenta *volatility* permite analisar o conteúdo da memória de um computador.
- **Rekall**: Uma ramificação da ferramenta *volatility*, que permite analisar o conteúdo da memória de um computador.